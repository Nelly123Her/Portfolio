# Deployment Guide for SRE Portfolio Dashboard

This guide explains how to deploy the Django blog dashboard to Render cloud platform.

## Prerequisites

- A Render account (https://render.com)
- Your code pushed to a Git repository (GitHub, GitLab, or Bitbucket)

## Deployment Steps

### 1. Prepare Your Repository

Ensure your repository contains all the deployment files:
- `render.yaml` - Render service configuration
- `Dashboard/requirements.txt` - Python dependencies
- `Dashboard/gunicorn.conf.py` - Gunicorn server configuration
- `Dashboard/build.sh` - Build script
- `Dashboard/.env.example` - Environment variables template

### 2. Deploy to Render

1. **Connect Repository**:
   - Log in to your Render dashboard
   - Click "New" → "Blueprint"
   - Connect your Git repository
   - Select the repository containing your code

2. **Configure Environment Variables**:
   Render will automatically read the `render.yaml` file, but you may need to set additional environment variables:
   - `SECRET_KEY` - Will be auto-generated by Render
   - `DEBUG` - Set to `False` (already configured in render.yaml)
   - `ALLOWED_HOSTS` - Set to `*` (already configured in render.yaml)
   - `DATABASE_URL` - Will be auto-provided by the PostgreSQL database

3. **Deploy**:
   - Click "Apply" to start the deployment
   - Render will create both the web service and PostgreSQL database
   - The build process will run automatically

### 3. Post-Deployment Setup

1. **Access Admin Panel**:
   - Navigate to `https://your-app-name.onrender.com/admin/`
   - Use the default superuser credentials:
     - Username: `admin`
     - Password: `admin123`
   - **Important**: Change these credentials immediately after first login

2. **Update CORS Settings** (if needed):
   - If you have a separate frontend, add your frontend domain to the `CORS_ALLOWED_ORIGINS` environment variable

## File Structure

```
sre-portfolio/
├── render.yaml                 # Render deployment configuration
├── DEPLOYMENT.md              # This file
└── Dashboard/
    ├── requirements.txt       # Python dependencies
    ├── gunicorn.conf.py      # Gunicorn configuration
    ├── build.sh              # Build script
    ├── .env.example          # Environment variables template
    ├── manage.py
    ├── blog_dashboard/
    │   ├── settings.py       # Updated for production
    │   └── ...
    └── blog/
        └── ...
```

## Environment Variables

The following environment variables are configured in `render.yaml`:

- `PYTHON_VERSION`: Python version (3.11.0)
- `DJANGO_SETTINGS_MODULE`: Django settings module
- `DEBUG`: Debug mode (False for production)
- `ALLOWED_HOSTS`: Allowed hosts (*)
- `SECRET_KEY`: Django secret key (auto-generated)
- `DATABASE_URL`: PostgreSQL connection string (auto-provided)

## Database

The application uses:
- **Development**: SQLite (local development)
- **Production**: PostgreSQL (Render managed database)

Migrations are automatically run during deployment via the build script.

## Static Files

Static files are handled by:
- **WhiteNoise**: For serving static files in production
- **Collectstatic**: Automatically run during build process

## Monitoring

- **Logs**: Available in Render dashboard under your service
- **Metrics**: CPU, memory, and request metrics in Render dashboard
- **Health Checks**: Automatic health monitoring by Render

## Troubleshooting

### Common Issues

1. **Build Failures**:
   - Check the build logs in Render dashboard
   - Ensure all dependencies are in `requirements.txt`
   - Verify Python version compatibility

2. **Database Connection Issues**:
   - Ensure PostgreSQL service is running
   - Check `DATABASE_URL` environment variable

3. **Static Files Not Loading**:
   - Verify `collectstatic` ran successfully
   - Check WhiteNoise configuration in settings

4. **CORS Issues**:
   - Update `CORS_ALLOWED_ORIGINS` with your frontend domain
   - Ensure CORS middleware is properly configured

### Getting Help

- Check Render documentation: https://render.com/docs
- Review Django deployment best practices
- Check application logs in Render dashboard

## Security Notes

- Change default admin credentials immediately
- Use strong, unique passwords
- Regularly update dependencies
- Monitor access logs
- Consider enabling additional security headers in production